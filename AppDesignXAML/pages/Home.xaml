<Page x:Class="AppDesignXAML.pages.Home"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      FlowDirection="RightToLeft">

    
    <Grid>

        <!-- Background -->
        <Grid.Background>
            <ImageBrush ImageSource="/Images/backgroundColor.jpg"
                        Stretch="UniformToFill"/>
        </Grid.Background>

        <!-- Dark overlay -->
        <Border Background="#66000000"/>

        <!-- Login -->
        <Button HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="20"
                Background="Transparent"
                BorderThickness="0"
                Cursor="Hand"
                Click="Login_Click">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="👤" FontSize="18" Foreground="White"/>
                <TextBlock Text=" התחברות"
                           FontSize="14"
                           FontWeight="SemiBold"
                           Foreground="White"/>
            </StackPanel>
        </Button>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="2*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Title -->
            <StackPanel Grid.Row="0"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center">
                <TextBlock Text="הטיול הבא שלך מתחיל כאן"
                           FontSize="38"
                           FontWeight="SemiBold"
                           Foreground="White"/>
                <TextBlock Text="מצא מלונות, דילים וחופשות בקלות"
                           FontSize="16"
                           Foreground="#E5E7EB"
                           Margin="0 10 0 0"/>
            </StackPanel>

            <!-- Search Card -->
            <Border Grid.Row="1"
                    Width="760"
                    Padding="28"
                    Background="White"
                    CornerRadius="18"
                    BorderBrush="#E5E7EB"
                    BorderThickness="1"
                    HorizontalAlignment="Center"
                    Margin="0 30">

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2.5*"/>
                        <ColumnDefinition Width="2.5*"/>
                        <ColumnDefinition Width="2.5*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Destination -->
                    <Border x:Name="DestinationBox"
                            CornerRadius="12"
                            BorderBrush="#D1D5DB"
                            BorderThickness="1"
                            Padding="14"
                            Margin="0 0 10 0"
                            Cursor="Hand"
                            MouseLeftButtonUp="Destination_Click">
                        <StackPanel>
                            <TextBlock Text="לאן?"
                                       FontSize="13"
                                       Foreground="#6B7280"/>
                            <TextBlock x:Name="SelectedCityText"
                                       Text="בחר יעד"
                                       FontSize="15"
                                       FontWeight="SemiBold"
                                       Foreground="#111827"
                                       Margin="0 6 0 0"/>
                        </StackPanel>
                    </Border>

                    <!-- Dates -->
                    <Border x:Name="DatesBox"
                            Grid.Column="1"
                            CornerRadius="12"
                            BorderBrush="#D1D5DB"
                            BorderThickness="1"
                            Padding="14"
                            Margin="10 0"
                            Cursor="Hand"
                            MouseLeftButtonUp="Dates_Click">
                        <StackPanel>
                            <TextBlock Text="תאריכים"
                                       FontSize="13"
                                       Foreground="#6B7280"/>
                            <TextBlock x:Name="DatesText"
                                       Text="בחר תאריכים"
                                       FontSize="15"
                                       FontWeight="SemiBold"
                                       Foreground="#111827"
                                       Margin="0 6 0 0"/>
                        </StackPanel>
                    </Border>

                    <!-- Guests -->
                    <Border x:Name="GuestsBox"
                            Grid.Column="2"
                            CornerRadius="12"
                            BorderBrush="#D1D5DB"
                            BorderThickness="1"
                            Padding="14"
                            Margin="10 0"
                            Cursor="Hand"
                            MouseLeftButtonUp="Guests_Click">
                        <StackPanel>
                            <TextBlock Text="נוסעים"
                                       FontSize="13"
                                       Foreground="#6B7280"/>
                            <TextBlock x:Name="GuestsText"
                                       Text="2 מבוגרים · חדר 1"
                                       FontSize="15"
                                       FontWeight="SemiBold"
                                       Foreground="#111827"
                                       Margin="0 6 0 0"/>
                        </StackPanel>
                    </Border>

                    <!-- Search -->
                    <Button Grid.Column="3"
                            Content="חיפוש"
                            Width="120"
                            Height="54"
                            Background="#E11D48"
                            Foreground="White"
                            FontSize="16"
                            FontWeight="SemiBold"
                            BorderThickness="0"
                            Cursor="Hand"
                            Margin="14 0 0 0"/>
                </Grid>
            </Border>

            <!-- ================= POPUPS ================= -->

            <!-- Cities -->
            <Popup x:Name="CitiesPopup"
                   PlacementTarget="{Binding ElementName=DestinationBox}"
                   Placement="Bottom"
                   StaysOpen="False">
                <Border Background="White"
                        Width="260"
                        CornerRadius="14"
                        BorderBrush="#D1D5DB"
                        BorderThickness="1"
                        Padding="8">
                    <ListBox x:Name="CitiesList"
                             MouseDoubleClick="CitiesList_DoubleClick">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding CityName}"
                                           Padding="8"
                                           FontSize="14"/>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </Border>
            </Popup>

            <!-- Dates -->
            <Popup x:Name="DatesPopup"
                   PlacementTarget="{Binding ElementName=DatesBox}"
                   Placement="Bottom"
                   StaysOpen="False">
                <Border Background="White"
                        CornerRadius="16"
                        BorderBrush="#D1D5DB"
                        BorderThickness="1"
                        Padding="16"
                        Width="360">
                    <StackPanel>
                        <TextBlock Text="בחר תאריכים"
                                   FontSize="16"
                                   FontWeight="SemiBold"
                                   Margin="0 0 0 10"/>
                        <Calendar x:Name="CalendarRange"
                                  SelectionMode="SingleRange"/>
                        <Button Content="אישור"
                                Height="40"
                                Margin="0 10 0 0"
                                Background="#2563EB"
                                Foreground="White"
                                FontWeight="SemiBold"
                                BorderThickness="0"
                                Click="DatesConfirm_Click"/>
                    </StackPanel>
                </Border>
            </Popup>

            <!-- Guests -->
            <Popup x:Name="GuestsPopup"
                   PlacementTarget="{Binding ElementName=GuestsBox}"
                   Placement="Bottom"
                   StaysOpen="False">
                <Border Background="White"
                        CornerRadius="16"
                        BorderBrush="#D1D5DB"
                        BorderThickness="1"
                        Padding="16"
                        Width="260">
                    <StackPanel>

                        <!-- Adults -->
                        <StackPanel Orientation="Horizontal" Margin="0 0 0 10">
                            <TextBlock Text="מבוגרים" Width="90"/>
                            <Button Content="−" Width="30" Click="AdultsMinus_Click"/>
                            <TextBlock x:Name="AdultsText"
                                       Text="2"
                                       Width="30"
                                       TextAlignment="Center"/>
                            <Button Content="+" Width="30" Click="AdultsPlus_Click"/>
                        </StackPanel>

                        <!-- Kids -->
                        <StackPanel Orientation="Horizontal" Margin="0 0 0 10">
                            <TextBlock Text="ילדים" Width="90"/>
                            <Button Content="−" Width="30" Click="KidsMinus_Click"/>
                            <TextBlock x:Name="KidsText"
                                       Text="0"
                                       Width="30"
                                       TextAlignment="Center"/>
                            <Button Content="+" Width="30" Click="KidsPlus_Click"/>
                        </StackPanel>

                        <!-- Rooms -->
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="חדרים" Width="90"/>
                            <Button Content="−" Width="30" Click="RoomsMinus_Click"/>
                            <TextBlock x:Name="RoomsText"
                                       Text="1"
                                       Width="30"
                                       TextAlignment="Center"/>
                            <Button Content="+" Width="30" Click="RoomsPlus_Click"/>
                        </StackPanel>

                        <Button Content="אישור"
                                Margin="0 12 0 0"
                                Height="36"
                                Background="#2563EB"
                                Foreground="White"
                                BorderThickness="0"
                                Click="GuestsConfirm_Click"/>
                    </StackPanel>
                </Border>
            </Popup>

        </Grid>
    </Grid>
</Page>
